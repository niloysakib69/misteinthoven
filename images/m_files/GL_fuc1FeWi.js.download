if (self.CavalryLogger) { CavalryLogger.start_js(["+3KRSKZ"]); }

__d("MobileBigPipeStratcomProxy",["PageletEventConstsJS","PageletEventsHelper","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("PageletEventsHelper").init(),d("PageletEventsHelper").subscribeToPageletEvents(h)}function h(a,b,d,e){b===c("PageletEventConstsJS").DISPLAY_END&&c("Stratcom").invoke("m:schedulable:loaded",null,{name:a,lid:e})}g.init=a;g._onPageletEvent=h}),98);
__d("MJewelLinkFetcher",["$","DOM","MLinkHack"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("DOM").find(c("$")("MChromeHeader"),"div",a);if(!a)return null;a=d("DOM").find(a,"a","icon");return!a?null:d("MLinkHack").getHref(a)}g.get=a}),98);
__d("MJewelsSafePageletLoader",["MRequest","PageletEventConstsJS","PageletEventsHelper","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";var h={};function i(a,b){var e=null,f=function(){e&&e.remove(),e=null};e=c("Stratcom").listen("m:page:unload",null,function(){f(),b()});d("PageletEventsHelper").subscribeToPageletEvents(function(b,d,e,g){b===a&&d===c("PageletEventConstsJS").JS_END&&f()})}function j(a,b){c("Stratcom").listen(["m:chrome:tab:show","m:jewel:flyout:open"],a,function(){new(c("MRequest"))(b).send(),c("Stratcom").removeCurrentListener()})}function a(a){if(h[a.jewelSigil])return;h[a.jewelSigil]=!0;i(a.pageletID,j.bind(null,a.jewelSigil,a.retryUri))}g.trackJewel=a}),98);
__d("MCoreDeferred",["MPageControllerImpl","MPageFetcherImpl"],(function(a,b,c,d,e,f){b("MPageControllerImpl"),b("MPageFetcherImpl")}),null);
__d("MFullPageLoadState",["NavigationMetrics","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";var h="pre-tti",i=c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,a);c("Stratcom").listen("m:page:loading",null,function(){h==="pre-tti"?h="interrupted-pre-tti":h==="post-tti"?h="interrupted-post-tti":h==="post-dd"&&(h="interrupted-post-dd"),i&&i.remove(),i=null,c("Stratcom").removeCurrentListener()});function a(a,b){if(a!==c("NavigationMetrics").getFullPageLoadLid())return;b.event==="tti"&&h==="pre-tti"?h="post-tti":b.event==="all_pagelets_displayed"&&(h==="pre-tti"||h==="post-tti")?h="post-dd":b.event==="e2e"&&h!=="post-e2e"&&(h="post-e2e",i&&i.remove(),i=null)}function b(){return h}g.get=b}),98);
__d("MAsyncNavigationTrackerTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setEventSpecificDetails=function(a){this.$1.event_specific_details=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setNavigationID=function(a){this.$1.navigation_id=a;return this};c.setPath=function(a){this.$1.path=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSourcePath=function(a){this.$1.source_path=a;return this};c.setSourceTopView=function(a){this.$1.source_top_view=a;return this};c.setTimeSinceNavStart=function(a){this.$1.time_since_nav_start=a;return this};c.setTimeSinceSessionStart=function(a){this.$1.time_since_session_start=a;return this};return a}();c={event_name:!0,event_specific_details:!0,navigation_id:!0,path:!0,session_id:!0,source_path:!0,source_top_view:!0,time_since_nav_start:!0,time_since_session_start:!0};e.exports=a}),null);
__d("MPageNavigationTracking",["EventListener","JavelinHistory","MAsyncNavigationTrackerTypedLogger","MFullPageLoadState","Stratcom","URI","performanceAbsoluteNow","performanceNavigationStart","uuid"],(function(a,b,c,d,e,f,g){"use strict";var h=c("uuid")(),i=0,j=null;function a(){c("Stratcom").listen("m:page:load-start",null,l),c("Stratcom").listen("m:page:render:complete",null,p),c("Stratcom").listen("m:history:change",null,m),c("Stratcom").listen("m:page:error",null,o),c("Stratcom").listen(["go","gouri"],null,s),c("EventListener").listen(window,"blur",q),c("EventListener").listen(window,"beforeunload",r)}function k(){j=null}function l(a){a=a.getData();var b=a.targetPath,e=a.previousPath,f=a.previousTopView,g=a.prefetchState;g=g===void 0?null:g;var h=a.cacheType;h=h===void 0?null:h;a=a.isFromHistory;a=a===void 0?!1:a;b=u(b);e=u(e);f=f;if(b==null)return;n(b,a);var k=++i;j={id:k,path:b,sourcePath:e,sourceTopView:f,startTimeAbsolute:c("performanceAbsoluteNow")(),prefetchState:g,cacheType:h,navigationType:a?"history":null};t("page_load_start",!1,{fullPageLoadState:d("MFullPageLoadState").get()})}function m(a){var b=u(a.getData().path);if(j&&j.path!==b){a=a.getData().trigger===c("JavelinHistory").TRIGGERS.POPSTATE;n(b,a)}}function n(a,b){if(!j)return;t("page_load_abandoned",!1,{abandonedToPath:a,isFromBackPress:b.toString()});k()}function o(a){if(!j)return;a=a.getData();t("page_load_failed",!1,{errorCode:(a==null?"":a).toString()});k()}function p(a){a=a.getData();a=a.path;a=u(a);if(a==null||j==null||j.path!=a)return;t("page_render_complete");k()}function q(){if(!j)return;t("browser_moved_to_background",!0);k()}function r(){t("session_unload",!0)}function s(a){a=a.getData();a=a.uri;t("session_navigate_away",!0,{uri:a});k()}function t(a,b,d){b===void 0&&(b=!1);if(j==null)return;d=d||{};d.cacheType=j.cacheType;d.navigationType=j.navigationType;d.prefetchState=j.prefetchState;var e=c("performanceAbsoluteNow")();a=new(c("MAsyncNavigationTrackerTypedLogger"))().setSessionID(h).setNavigationID(j.id.toString()).setPath(j.path).setSourcePath(j.sourcePath).setSourceTopView(j.sourceTopView).setEventName(a).setTimeSinceNavStart(e-j.startTimeAbsolute).setEventSpecificDetails(d).setTimeSinceSessionStart(e-c("performanceNavigationStart")());b?a.logImmediately():a.log()}function u(a){return!a?null:new(c("URI"))(a).getQualifiedURI().toString()}g.init=a}),98);
__d("onSyncTTI",["Arbiter","BigPipe","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("Arbiter").subscribeOnce(c("BigPipe").Events.tti,function(){c("Stratcom").invoke("m:root:render")})}g.run=a}),98);
__d("AddressBar",["MViewport","ge","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=0;function g(){a=0;if(b("MViewport").getScrollTop()<60){var c=h()*-1;b("MViewport").scrollToHeader(c)}}function h(){var a=b("ge")("header-notices");return a?a.offsetHeight:0}function c(){navigator.userAgent.indexOf("iPad")===-1&&window.addEventListener("load",function a(){window.removeEventListener("load",a,!1),g()},!1)}f.setupLoadListener=c}),null);
__d("ViewportDimensions",["Bootloader","MViewport","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h={_initialized:!1,_innerWidth:0,_innerHeight:0,_outerWidth:0,_outerHeight:0,_wasCookieSet:!1,init:function(){!h._initialized&&!c("isInIframe")()&&!d("MViewport").isLandscape()&&(h._initialized=!0,h._innerWidth=window.innerWidth,h._innerHeight=window.innerHeight,h._outerWidth=window.outerWidth,h._outerHeight=window.outerHeight)},setCookie:function(a){if(h._wasCookieSet){a&&a();return}c("Bootloader").loadModules(["Cookie"],function(b){if(!h._initialized)return;h._wasCookieSet||(h._wasCookieSet=!0,b.set("vpd",[h.getScreenDimension(h._innerHeight,h._outerHeight,screen.height,.87),h.getScreenDimension(h._innerWidth,h._outerWidth,screen.width,1),window.devicePixelRatio].join("x")));a&&a()},"ViewportDimensions")},getScreenDimension:function(a,b,c,d){var e=0;b===0?e=a:a===0?e=b:e=Math.min(a,b);a=Math.max(1,window.devicePixelRatio);return Math.floor(a*(e===0?Math.floor(c*d):e))}};a=h;g["default"]=a}),98);
__d("MPageLoadClientMetricsCallbacks",["MHistory","NavigationMetrics","Run","Stratcom","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("SubscriptionsHandler"))();function i(){h.release()}function j(b,d,e){return c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(f,g){if(f!==b)c("NavigationMetrics").removeCurrentListener();else if(g.event===d){f=a.MPageLoadClientMetrics.currentTimeToNavStartDelta(g.timestamp);a.MPageLoadClientMetrics.logEvent(e,f);c("NavigationMetrics").removeCurrentListener()}})}function b(b){if(!a.MPageLoadClientMetrics||!a.MPageLoadClientMetrics.isEnabled())return;a.MPageLoadClientMetrics.setDisableCallback(i);h.addSubscriptions(j(b.lid,"tti","tti"),j(b.lid,"e2e","e2e"),c("Stratcom").listen("m:page:load-start",null,function(b){if(b.getData().isFromHistory)return;a.MPageLoadClientMetrics.logEvent("navigation",a.MPageLoadClientMetrics.getMSFromNavStart(),a.MPageLoadClientMetrics.origin+b.getData().targetPath)}),c("Stratcom").listen("m:history:change",null,function(){var b=c("MHistory").getState();b=b?"soft="+b:c("MHistory").getPath();a.MPageLoadClientMetrics.logEvent("navigation",a.MPageLoadClientMetrics.getMSFromNavStart(),b)}));d("Run").onUnload(function(){a.MPageLoadClientMetrics.disable()})}g.init=b}),98);
__d("MMessagesThreadRowID",[],(function(a,b,c,d,e,f){"use strict";var g="other_user_fbid_",h="thread_fbid_";function a(a,b,c){return a+(b?g+b:h+String(c))}f.getThreadRowID=a}),66);
__d("MBackToTop",["JavelinHistory","MHome","MPageController","MPageControllerPath","MStopNGo","MViewport","Stratcom"],(function(a,b,c,d,e,f){"use strict";var g=b("MViewport").getScreenHeight(),h={init:function(a){if(!h._isBrowserSupported())return;if(h._initialized)return;h._initialized=!0;h._reload=a.reload;b("MStopNGo").listen("go",h._pushScrollingStateIfNeeded);b("MStopNGo").listen("stop",function(){return setTimeout(h._pushScrollingStateIfNeeded,1e3)});b("Stratcom").listen("popstate",null,h._onpopstate)},_onpopstate:function(a){h._lastpop=Date.now();if(!h._isPathSupported())return;if(h._isScrollingState())return;b("MPageControllerPath").isRequestPath(location.href)&&b("MViewport").getScrollTop()>g&&(window.setTimeout(function(){b("MViewport").scrollToTop(),h._reload==="full"&&b("MPageController").reload()},1),a.stop())},_pushScrollingStateIfNeeded:function(){if(!h._isPathSupported())return;if(h._isScrollingState())return;b("MViewport").getScrollTop()>g&&Date.now()-h._lastpop>1e3&&window.history.pushState({scrolling:1},null)},_initialized:!1,_lastpop:0,_reload:null,_isScrollingState:function(){var a=window.history.state;return a&&a.scrolling},_isBrowserSupported:function(){return b("JavelinHistory").CAN_USE_PUSH_STATE},_isPathSupported:function(){return b("MHome").isHome(location.href)}};e.exports=h}),null);
__d("MTimeSpentDebug",["GeneratedLoggerUtils","ScriptPath"],(function(a,b,c,d,e,f,g){var h="logger:MDebugTimeSpentLoggerConfig",i={signal:!0,retry:!0},j=0;function a(a){if(a>=j&&a-j<1e3)return;var b={activity_time_ms:a,last_activity_time_ms:j,script_path:d("ScriptPath").getTopViewEndpoint()};d("GeneratedLoggerUtils").log(h,b,i);j=Math.floor(a/1e3)*1e3}g.report=a}),98);
__d("IasUtsClientDebuggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743690");c=b("FalcoLoggerInternal").create("ias_uts_client_debugging",a);e.exports=c}),null);
__d("TimeSpentArray",["Banzai","TimeSlice","clearTimeout","pageID","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=2,i=h*32,j,k,l,m,n,o,p,q,r,s,t={},u;function v(){return{timeoutDelayMap:t,nextDelay:u,timeoutInSeconds:m}}function w(){if(j){var a=Date.now();a>o&&(q=Math.min(i,Math.ceil(a/1e3-n)));a=B();a&&j(a,u)}A()}function x(){y(),l=c("setTimeoutAcrossTransitions")(c("TimeSlice").guard(w,"TimeSpentArray Timeout",{propagationType:c("TimeSlice").PropagationType.ORPHAN}),m*1e3)}function y(){l&&(c("clearTimeout")(l),l=null)}function z(a){n=a;o=n*1e3;p=[1];for(var a=1;a<h;a++)p.push(0);q=1;r+=1;s+=1;a=s.toString()+"_delay";u=t[a];u===void 0&&(u=t.delay);a=s.toString()+"_timeout";a=t[a];a===void 0&&(a=t.timeout);a=Math.min(a,i);m=a||i;x()}function A(){y(),p=null}function B(){return!p?null:{tos_id:c("pageID"),start_time:n,tos_array:p.slice(0),tos_len:q,tos_seq:s,tos_cum:r}}function C(a){if(a>=o&&a-o<1e3)return;k&&k(a);D(Math.floor(a/1e3))}function D(a){var b=a-n;(b<0||b>=i)&&w();!p?z(a):(p[b>>5]|=1<<(b&31),q=b+1,r+=1,o=a*1e3)}function a(a,b,d,e){r=0,s=-1,j=a,k=e,typeof b==="object"&&b!==null?t=b:t={},z(Math.floor((d===void 0||d===null||d===0?Date.now():d)/1e3)),c("Banzai").subscribe(c("Banzai").SHUTDOWN,w)}function b(a){C(a)}function d(){return B()}function e(){w()}function f(){A()}function E(){return v()}g.init=a;g.update=b;g.get=d;g.ship=e;g.reset=f;g.testState=E}),98);
__d("WebImmediateActiveSecondsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1843988");c=b("FalcoLoggerInternal").create("web_immediate_active_seconds",a);e.exports=c}),null);
__d("TimeSpentImmediateActiveSecondsLoggerBlue",["ImmediateActiveSecondsConfig","ScriptPath","WebImmediateActiveSecondsFalcoEvent"],(function(a,b,c,d,e,f,g){var h=0;function i(a){if(c("ImmediateActiveSecondsConfig").sampling_rate<=0)return!1;a=Math.floor(a/1e3)%c("ImmediateActiveSecondsConfig").sampling_rate;return a===c("ImmediateActiveSecondsConfig").ias_bucket}function a(a){if(a>=h&&a-h<1e3)return;i(a)&&c("WebImmediateActiveSecondsFalcoEvent").logImmediately(function(){return{activity_time_ms:a,last_activity_time_ms:h,script_path:c("ScriptPath").getTopViewEndpoint()}});h=Math.floor(a/1e3)*1e3}f.exports={maybeReportActiveSecond:a}}),34);
__d("TimeSpentImmediateActiveSecondsLogger",["TimeSpentImmediateActiveSecondsLoggerBlue"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("TimeSpentImmediateActiveSecondsLoggerBlue")}),98);
__d("WebTimeSpentBitArrayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1829320");c=b("FalcoLoggerInternal").create("web_time_spent_bit_array",a);e.exports=c}),null);
__d("MTimeSpentBitArrayLogger",["MTimeSpentDebug","ODS","Stratcom","TimeSpentArray","TimeSpentImmediateActiveSecondsLogger","Visibility","WebTimeSpentBitArrayFalcoEvent","isInIframe"],(function(a,b,c,d,e,f,g){function h(){d("TimeSpentArray").ship()}function i(){var a=Date.now();d("TimeSpentArray").update(a);c("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(a);m&&d("MTimeSpentDebug").report(a)}function j(a){a._m="1",c("WebTimeSpentBitArrayFalcoEvent").logImmediately(function(){return{start_time:a.start_time,tos_array:a.tos_array,tos_cum:a.tos_cum,tos_id:a.tos_id,tos_len:a.tos_len,tos_seq:a.tos_seq,_m:"1"}})}function k(){return["gesturestart","mousedown","touchstart","scroll","keydown"]}function l(){var a=k();c("Stratcom").listen(a,null,i);a="onpagehide"in window?["pagehide","blur"]:["blur"];c("Stratcom").listen(a,null,h);c("Visibility").addListener("hidden",h)}var m=!1;function a(a,b){if(c("isInIframe")())return;m=!!b;b=Date.now();d("TimeSpentArray").init(j,null,b);l();c("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(b);m&&d("MTimeSpentDebug").report(b);d("ODS").bumpEntityKey(223,"ms.time_spent.qa."+a,"time_spent.bits.js_initialized")}g.getMonitoredEvents=k;g.init=a}),98);
__d("MLink",["CurrentEnvironment","DOM","ErrorUtils","FBLogger","MLegacyDataStore","MLinkHack","MLynx","MPageCache","MPageController","Stratcom","URI"],(function(a,b,c,d,e,f,g){var h="standalone"in window.navigator&&window.navigator.standalone,i=!1;function a(){if(i)return;i=!0;d("DOM").listen(document.documentElement,"click",null,function(a){if(a.getPrevented())return;c("ErrorUtils").applyWithGuard(function(){var b=a.getNode("tag:a");if(b===null||b===void 0)return;var e=a.getRawEvent();if(b.getAttribute("onclick")||(e.which||e.button)>=2)return;d("MLinkHack").remove(b);e=b.getAttribute("href")||null;var f=new(c("URI"))(e),g=f.getProtocol();if(g&&g!="http"&&g!="https")return;var i=f.getDomain(),j;c("CurrentEnvironment").workplacedotcom?j=i&&!/\.workplace.com$/i.test(i):j=i&&!/\.facebook.com$/i.test(i);j&&!d("MLynx").isShimmedLink(b)&&c("FBLogger")("FIXME").mustfix("Loading an external URL without shimming: %s",e);i=b.getAttribute("target")||null;if((i==="_blank"||j)&&h)return;if(b.hasAttribute("data-disable-mlink"))return;if(i==="_blank")window.open(e,"_blank");else if(f.getPath().toLowerCase().indexOf("/dialog/oauth")>-1)return;else if(i||g&&g+":"!==location.protocol||c("Stratcom").hasSigil(b,"no_mpc")||j)window.location=e;else if(e)if(e.indexOf("#")===0){f=document.getElementById(e.substr(1));f&&f.scrollIntoView()}else{i=d("MLegacyDataStore").get(b);i.fromCache&&c("MPageCache").setScrollHistory(e,0);d("MPageController").load(e,{replace:i.behavior==="replace-state",expiration:i.fromCache?i.shortCache?d("MPageController").EXPERIMENTAL_USER_EXPIRE_MS:d("MPageController").HISTORY_EXPIRE_MS:null,noAutoScroll:i.noAutoScroll,prefetchHref:i.prefetchHref,doNotRefocus:i.doNotRefocus})}else{if(b.hasAttribute("data-sigil"))return;g="";j=a.getTarget();while(j&&j!=document.body)g=g+" <"+j.nodeName,typeof j.id==="string"&&j.id!==""&&(g=g+" id="+j.id),typeof j.className==="string"&&j.className!==""&&(g=g+" class="+j.className),g+=" >",j=j.parentNode;c("FBLogger")("FIXME").warn('handleClick: unknown link action: <a id="%s" class="%s" /> Path: %s',b.id,b.className,g);return}a.prevent()},null,[],null,"LinkController")})}g.setupListener=a}),98);
__d("MLiteInit",["Kite","WebLite"],(function(a,b,c,d,e,f,g){function a(){d("WebLite").init(),d("Kite").init()}g.init=a}),98);
__d("WebBlueTimeSpentNavigationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1829319");c=b("FalcoLoggerInternal").create("web_blue_time_spent_navigation",a);e.exports=c}),null);
__d("ScriptPathLogger",["Banzai","LogHistory","ScriptPath","URI","WebBlueTimeSpentNavigationFalcoEvent","WebSession","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";f="script_path_change";var h={scriptPath:null,categoryToken:null,extraData:{}},i=!1,j="imp_id";function k(a){var b=c("URI").getNextURI?c("URI").getNextURI():new(c("URI"))(window.location.href),d=b.getQueryData();b=b.getPath();b.endsWith("/")&&(b=b.substr(0,b.length-1));d.comment_id&&(a.extra_data=babelHelpers["extends"]({},a.extra_data,{graphql_comment_id:d.comment_id}));var e=l(b,d);if(e){a.content_id=e;return}e=m(b);if(e!==""){a.dest_topic_feed=e;return}if(n(b)){e=d.queue_id;e&&(a.dest_srt_queue_id=e);b=d.job_in_review;b&&(a.dest_srt_reviewing_job_id=b);return}}function l(a,b){if(b.story_fbid)return b.story_fbid;if(b.fbid)return b.fbid;if(b.view==="permalink"&&b.id)return b.id;b=/\/(posts|videos|notes|groups\/.*\/permalink)\//;var c=/^[0-9]+$/;if(b.test(a)){b=a.split("/");a=b[b.length-1];if(c.test(a))return a}return""}function m(a){if(!a||a.search("/feed/topics/")==-1)return"";a=a.split("/");return a[a.length-1]}function n(a){return!!a&&a.search("/intern/review/")!==-1}function o(a,b,e,f){d("WebSession").extend();if(!i||c("isInIframe")())return;var g={source_path:a.scriptPath,source_token:a.categoryToken,dest_path:b.scriptPath,dest_token:b.categoryToken,impression_id:b.extraData?b.extraData.imp_id:null,cause:e,sid_raw:d("WebSession").getId()};e=e==="unload";e||k(g);if(f!=null){var h=f.snowlift_content_id;!e&&h!=null&&(g.content_id=h,delete f.snowlift_content_id);g.extra_data=babelHelpers["extends"]({},g.extra_data,f)}a.scriptPath===null&&(g.referrer=document.referrer);e=d("ScriptPath").getClickPointInfo();e&&(g.click_point_info=e);if(a.extraData)for(var l in a.extraData)l!=j&&(g["source_"+l]=a.extraData[l]);if(b.extraData)for(var m in b.extraData)m!=j&&(g["dest_"+m]=b.extraData[m]);a.topViewEndpoint&&(g.source_endpoint=a.topViewEndpoint);b.topViewEndpoint&&(g.dest_endpoint=b.topViewEndpoint);a.restored&&(g.source_restored=!0);c("WebBlueTimeSpentNavigationFalcoEvent").logImmediately(function(){return{json_data:JSON.stringify(g)}});d("ScriptPath").setClickPointInfo(null)}function p(){o(d("ScriptPath").getSourcePageInfo()||h,d("ScriptPath").getPageInfo()||h,"load")}function q(a,b,c){o(a,b,"transition",c)}function a(){o(d("ScriptPath").getPageInfo()||h,h,"unload"),d("ScriptPath").shutdown()}var r=d("ScriptPath").subscribe(function(a){if(i){var b=a.source,c=a.dest,d=a.cause;a=a.extraData;d?o(b||h,c||h,d,a):b?q(b,c||h,a):p()}});c("Banzai").subscribe(c("Banzai").SHUTDOWN,a);function b(){i=!0,d("ScriptPath").getPageInfo()&&p()}function e(){i=!1,r.remove()}g.BANZAI_LOGGING_ROUTE=f;g.startLogging=b;g.stopLogging=e}),98);
__d("onAfterDisplay",["NavigationMetrics","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f,g){"use strict";var h=[],i=!1;function a(a){a=c("TimeSlice").guard(a,"onAfterDisplay invocation",{propagationType:c("TimeSlice").PropagationType.ORPHAN});i?c("requestIdleCallback")(a):h.push(a)}c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){["all_pagelets_displayed","e2e"].indexOf(b.event)>-1&&!i&&(i=!0,h.forEach(function(a){c("requestIdleCallback")(a)}))});g["default"]=a}),98);